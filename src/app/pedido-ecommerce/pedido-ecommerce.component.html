<div class="alert alert-default" role="alert" *ngIf="isDanger2">
    <strong>Error, no encontramos tu dirección.</strong> 
</div>
<section *ngIf="showWeb"><!--web-->
    <div class="header" style="justify-content: center;">
        <p class="precio_km">PRECIO<span style="color:#FFBD00; font-weight: bold;">|</span><span style="color: black;" class="precio_km">{{precio | number : '1.0-2'}}€ </span></p>
    </div>

    <section class="pedido"> 
        <div>
            <img src="./assets/img/kanguro/pk.svg" alt="" style="position: absolute; right: 10rem; top: 6.9rem; height: 25rem; z-index: 0;">
        </div>
        <div class="datos_pedido">
            
            <p class="titulo" style="color: red; padding: 1.0vh 0 1.0vh 2.5vh; font-size: 2.5vh;">ORIGEN</p>
            <div class="origen">
                <div class="row" class="btn_limpiar" style="z-index: 1; position: relative;">
                    <p class="limpiar" (click)="limpiar1(0)"  style="font-size: 2vh; font-weight: bold; height: 4.0vh; padding: 0.8vh 1.6vh 1.0vh 2.1vh;">Limpiar Campos</p>
                </div>
                <div class="row ml">
                    <div class="col-4 campos">
                        <p class="campo1">Almacén</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="orige.nombre_origen" name="inputnombre_origen" #nombre_origen="ngModel" disabled>
                        <img src="./assets/img/kanguro/poligonoama.svg" alt="" class="poli" style="top: 46px;">
                        <ng-container *ngIf="nombre_origen.invalid && nombre_origen.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-2 campos">
                        <p class="campo1">Fecha solicitud</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="orige.fecha" name="inputfecha" #fecha="ngModel"  disabled>
                        <ng-container *ngIf="fecha.invalid && fecha.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container> 
                    </div>
                </div>
                <div class="row ml" [hidden]="true">
                    <div class="col-7 campos">
                        <p class="campo1">Dirección</p>
                        <input class="campo2" type="text" placeholder="" id="pac-input" (blur)="ver(0)" [(ngModel)]="orige.origen" name="inputorigen" #origen="ngModel" required>
                        <ng-container *ngIf="origen.invalid && origen.dirty">
                        <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>  
                    </div>
                </div>

            </div>
            <br>
            <p class="titulo" style="color: red; padding: 1.0vh 0 0 2.5vh; font-size: 2.5vh;">DESTINO</p>
            <div class="destino" *ngFor="let d of destinos;let indice=index">
                <hr style="color: cadetblue;" *ngIf="indice>0" >
                <div class="row" *ngIf="indice>0" class="btn_limpiar" style="z-index: 1; position: relative; padding-top: 10px; padding-right: 30px;">
                    <p class="limpiar" (click)="deleteDestinos(indice)"  style="font-size: 2vh; font-weight: bold; height: 4.0vh; padding: 0.8vh 1.6vh 1vh 1.6vh; border-radius: 40px;">x</p>
                </div>
                <div class="row ml">
                    <div class="col-5 campos">
                        <p class="campo1">Dirección de Destino pac-input{{indice}}</p>
                        <input class="campo2" type="text" placeholder=""  id="pac-input{{indice}}" (blur)="ver2(indice+1)" [(ngModel)]="d.destino" name="inputdestino" #destino="ngModel" required>
                        <ng-container *ngIf="destino.invalid && destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-1 campos">
                        <p class="campo1">Piso</p>
                        <input class="campo2" type="text" placeholder=""  [(ngModel)]="d.departamento_destino" name="inputdepartamento_destino" #departamento_destino="ngModel" required>
                        <ng-container *ngIf="departamento_destino.invalid && departamento_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-1 campos">
                        <p class="campo1">Puerta</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="d.puerta">
                    </div>
                    <div class="col-1 campos">
                        <p class="campo1">C.P.</p>
                        <input class="campo2" type="number" placeholder="" [(ngModel)]="d.distrito_destino" name="inputdistrito_destino" #distrito_destino="ngModel" required>
                        <ng-container *ngIf="distrito_destino.invalid && distrito_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    
                </div>
                <div class="row ml">
                    <div class="col-4 campos">
                        <p class="campo1">Nombre(s)</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="d.nombre_destino" name="inputnombre_destino" #nombre_destino="ngModel" required>
                        <ng-container *ngIf="nombre_destino.invalid && nombre_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-4 campos">
                        <p class="campo1">Teléfono</p>
                        <input class="campo2" type="number" placeholder="" [(ngModel)]="d.telefono_destino" name="inputtelefono_destino" #telefono_destino="ngModel" required>
                        <ng-container *ngIf="telefono_destino.invalid && telefono_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-4  carrito" style="width: 100%; text-align: end; ">
                        <img src="./assets/img/kanguro/cesta.svg" (click)="n(indice);open(view,'view')" alt="" class="cesta">
                    </div>
                </div>
                <div class="row ml">
                    <div class="col-6 campos2">
                        <p class="campo1">Notas</p>
                        <input name="" id="" cols="30" rows="10" class="campo2" [(ngModel)]="d.comentarios2" name="inputcomentarios2" #comentarios2="ngModel" required>
                    </div>
                    <div class="col-6 campos2">
                        <p class="campo1">Productos</p>
                        <textarea name="" id="" cols="30" rows="10" class="campo2" style="height: 54px;" [(ngModel)]="d.detalle" name="inputdetalle" #detalle="ngModel" required></textarea>
                        <ng-container *ngIf="detalle.invalid && detalle.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                </div>
                
            </div>
            <div class="row amarillo" style="padding-top: 14px;">
                <div class="col-2 campos">
                    <p class="campo1">Cantidad</p>  
                    <input class="sle2" type="text" placeholder="" [(ngModel)]="destino.cantidad" name="inputcantidad" #cantidad="ngModel" required> 
                </div>
                <div class="col-2 campos">
                    <p class="campo1">Fecha de envío</p>  
                    <input type="text" [placement]="top" class="sle2" [(ngModel)]="destino.fecha_destino" ngbDatepicker #d="ngbDatepicker" [minDate]="minDate" (click)="d.toggle()" name="inputfecha_destino" #fecha_destino="ngModel" required>
                    <ng-container *ngIf="fecha_destino.invalid && fecha_destino.dirty"> 
                    <span class="help is-danger">Este campo es requerido</span>
                    </ng-container>
                </div>
                <div class="col-2 campos">
                    <p class="campo1">Rango de envío</p>  
                    <select [(ngModel)]="destino.hora_destino" class="sle2">
                        <option *ngFor="let r of rangos" [value]="r" [attr.selected]="r">
                        {{r}}
                        </option>
                    </select>
                </div>
                <div class="col-4 campos" style="width: 100%; align-items: center; padding-right: 13px;">
                    <span class="btn_enviar" (click)="addDestinos()" style="width: 180px;">AGREGAR DESTINO</span>
                </div>
                <div class="col-2 campos" style="width: 100%; align-items: end; padding-right: 13px;">
                    <span class="btn_enviar" (click)="enviar()">ENVIAR</span>
                </div>
            </div>
            
            <div class="row  amarillo2" style="padding-bottom: 14px;">
                <div class="col-2 campos">
                </div>
                <div class="col-5 campos">
                </div>
                <div class="col-5 campos">
                    <!--span class="btn_enviar" (click)="enviar()">ENVIAR</span-->
                </div>
            </div>
            <!--div class="row medio">
                <span class="boton ocultar" (click)="enviar()" >ENVIAR</span>
            </div-->
        </div>
        
        <div class="mapa">
            <div id="map"></div>
            <div class="row medio">
            <span class="boton" (click)="enviar()" >ENVIAR</span>
            </div>
        </div>
    </section>
</section>


<section *ngIf="!showWeb"><!--MOBILE-->
    <div class="header">
        <p class="titu">Empresa</p>
        <p class="precio_km">PRECIO<span style="color:#FFBD00; font-weight: bold;">|</span><span style="color: black;" class="precio_km">{{precio | number : '1.0-2'}}€ </span></p>
    </div>

    <section class="pedido"> 
        <div class="datos_pedido">
            <p class="titulo">ORIGEN</p>
            <div class="origen">
                <div class="row" class="btn_limpiar">
                    <p class="limpiar" (click)="limpiar1(0)">Limpiar Campos</p>
                </div>
                <div class="row ml">
                    <div class="col-8 campos">
                        <p class="campo1">Almacén</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="orige.nombre_origen" name="inputnombre_origen" #nombre_origen="ngModel" disabled>
                        <img src="./assets/img/kanguro/poligonoama.svg" alt="" class="poli" style="top: 43px;">
                        <ng-container *ngIf="nombre_origen.invalid && nombre_origen.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-4 campos">
                        <p class="campo1">Fecha solicitud</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="orige.fecha" name="inputfecha" #fecha="ngModel"  disabled>
                        <ng-container *ngIf="fecha.invalid && fecha.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container> 
                    </div>
                </div>
                <div class="row ml" [hidden]="true">
                    <div class="col-7 campos">
                        <p class="campo1">Dirección</p>
                        <input class="campo2" type="text" placeholder="" id="pac-input" (blur)="ver(0)" [(ngModel)]="orige.origen" name="inputorigen" #origen="ngModel" required>
                        <ng-container *ngIf="origen.invalid && origen.dirty">
                        <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>  
                    </div>
                </div>

            </div>
            <br>
            <p class="titulo">DESTINO</p>
            <div class="destino" *ngFor="let destino of destinos;let indice=index">
                <div class="row ml">
                    <div class="col-8 campos">
                        <p class="campo1">Dirección de Destino </p>
                        <input class="campo2" type="text" placeholder=""  id="pac-input{{indice}}" (blur)="ver2(indice)" [(ngModel)]="destino.destino" name="inputdestino" #destino="ngModel" required>
                        <ng-container *ngIf="destino.invalid && destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-2 campos">
                        <p class="campo1">Piso</p>
                        <input class="campo2" type="text" placeholder=""  [(ngModel)]="destino.departamento_destino" name="inputdepartamento_destino" #departamento_destino="ngModel" required>
                        <ng-container *ngIf="departamento_destino.invalid && departamento_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-2 campos">
                        <p class="campo1">Puerta</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="destino.puerta">
                    </div>
                </div>
                <div class="row ml">
                    <div class="col-6 campos">
                        <p class="campo1">Nombre(s)</p>
                        <input class="campo2" type="text" placeholder="" [(ngModel)]="destino.nombre_destino" name="inputnombre_destino" #nombre_destino="ngModel" required>
                        <ng-container *ngIf="nombre_destino.invalid && nombre_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-4 campos">
                        <p class="campo1">Teléfono</p>
                        <input class="campo2" type="number" placeholder="" [(ngModel)]="destino.telefono_destino" name="inputtelefono_destino" #telefono_destino="ngModel" required>
                        <ng-container *ngIf="telefono_destino.invalid && telefono_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-2 campos">
                        <p class="campo1">C.P.</p>
                        <input class="campo2" type="number" placeholder="" [(ngModel)]="destino.distrito_destino" name="inputdistrito_destino" #distrito_destino="ngModel" required>
                        <ng-container *ngIf="distrito_destino.invalid && distrito_destino.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                </div>
                <div class="row ml">
                    <div class="col-10 campos2">
                        <p class="campo1">Notas</p>
                        <input name="" id="" cols="30" rows="10" class="campo2" [(ngModel)]="destino.comentarios2" name="inputcomentarios2" #comentarios2="ngModel" required>
                        
                    </div>
                </div>
                <div class="row ml">
                    <div class="col-10 campos2">
                        <p class="campo1">Productos</p>
                        <textarea name="" id="" cols="30" rows="10" class="campo2" style="height: 54px;" [(ngModel)]="destino.detalle" name="inputdetalle" #detalle="ngModel" required></textarea>
                        <ng-container *ngIf="detalle.invalid && detalle.dirty">
                            <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-2 campos2" class="carrito">
                        <img src="./assets/img/kanguro/cesta.svg" (click)="n(indice);open(view,'view')" alt="" class="cesta">
                    </div>
                </div>
                <div class="row amarillo" style="padding-top: 14px;">
                    <div class="col-2 campos">
                        <p class="campo1" style="overflow: inherit;">Cantidad</p>  
                        <input class="sle2" type="text" placeholder="" [(ngModel)]="destino.cantidad" name="inputcantidad" #cantidad="ngModel" required> 
                    </div>
                    <div class="col-4 campos">
                        <p class="campo1">Fecha de envío</p>  
                        <input type="text" [placement]="top" class="sle2" [(ngModel)]="fechaselec" ngbDatepicker #d="ngbDatepicker" [minDate]="minDate" (click)="d.toggle()" name="inputfecha_destino" #fecha_destino="ngModel" required>
                        <ng-container *ngIf="fecha_destino.invalid && fecha_destino.dirty"> 
                        <span class="help is-danger">Este campo es requerido</span>
                        </ng-container>
                    </div>
                    <div class="col-3 campos">
                        <p class="campo1" style="overflow: inherit;">Rango de envío</p>  
                        <select [(ngModel)]="destino.hora_destino" class="sle2">
                            <option *ngFor="let r of rangos" [value]="r" [attr.selected]="r">
                            {{r}}
                            </option>
                        </select>
                    </div>
                    <div class="col-3 campos">
                        <span class="btn_enviar" (click)="enviar()" style="width: 98%;">ENVIAR</span>
                    </div>
                </div>
                
                <div class="row  amarillo2" style="padding-bottom: 14px;">
                    <div class="col-2 campos">
                    </div>
                    <div class="col-5 campos">
                    </div>
                    <div class="col-5 campos">
                        <!--span class="btn_enviar" (click)="enviar()">ENVIAR</span-->
                    </div>
                </div>
            </div>
            <!--div class="row medio">
                <span class="boton ocultar" (click)="enviar()" >ENVIAR</span>
            </div-->
        </div>
        
        <div class="mapa">
            <div id="map"></div>
            <div class="row medio">
            <span class="boton" (click)="enviar()" >ENVIAR</span>
            </div>
        </div>
    </section>
</section>
<!-- MODAL VIEW -->
<ng-template #view let-c="close" let-d="dismiss">
    <div class="modal-header">
        <p class="modal-title" id="modal-title-default">Productos</p>
        <button type="button" class="close x" data-dismiss="modal" aria-label="Close" (click)="d('Cross click')">X</button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-6" *ngFor="let item of products; index as p;">
                <div class="content-product">
                    <img class="imageP" src="{{item.selec_image}}" alt="imagen">
                    <p class="titleP1">{{item.nombre}}</p>
                    <p class="cantP">{{item.descripcion}}</p>
                    
                    <p class="text-infoP">Color</p>
                    <div class="content-colors">
                        <div class="rectangle-color" *ngFor="let item of item.colores; index as i;" [ngStyle]="{'background-color': item.color}" (click)="selectColor(p,i)"></div>
                    </div>

                    <p class="text-infoP">Modelo:</p>
                    <div class="content-colors">
                        <div class="" *ngFor="let item of item.selec_atributos; index as i;"  (click)="selectAtributo(p,i)"><p>{{item.atributo}}</p></div>
                    </div>

                    <p class="cantP">Cantidad disponible: {{item.selec_cantidad}}</p>

                    <hr>
                    <div class="content-btn">
                        <p>X{{item.selec_selec}}</p>
                        <div>
                            <img src="./assets/img/kanguro/menos.svg" alt="" (click)="quitar(p)">
                            <img src="./assets/img/kanguro/mas.svg" alt="" (click)="add(p)">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" style="color:white;margin-right: 10px; background-color: red; border-radius: 10px;padding: 3px;" class="btn btn-link  ml-auto" data-dismiss="modal" (click)="despachar();c('Close click')">DESPACHAR</button>
    </div>
</ng-template>


